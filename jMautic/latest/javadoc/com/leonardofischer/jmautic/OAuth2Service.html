<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="pt">
<head>
<!-- Generated by javadoc (1.8.0_91) on Sat Oct 15 16:00:47 BRT 2016 -->
<title>OAuth2Service (jMautic API)</title>
<meta name="date" content="2016-10-15">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="OAuth2Service (jMautic API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/leonardofischer/jmautic/MauticException.html" title="class in com.leonardofischer.jmautic"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/leonardofischer/jmautic/OAuth2Service.html" target="_top">Frames</a></li>
<li><a href="OAuth2Service.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.leonardofischer.jmautic</div>
<h2 title="Class OAuth2Service" class="title">Class OAuth2Service</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.leonardofischer.jmautic.OAuth2Service</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/leonardofischer/jmautic/oauth/OAuthService.html" title="interface in com.leonardofischer.jmautic.oauth">OAuthService</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">OAuth2Service</span>
extends java.lang.Object
implements <a href="../../../com/leonardofischer/jmautic/oauth/OAuthService.html" title="interface in com.leonardofischer.jmautic.oauth">OAuthService</a></pre>
<div class="block"><p>Implements OAuth2 authentication for jMautic. If you want to connect to a Mautic instance
 using OAuth2, you need to create a instance of the OAuth2Service class, configure it with your
 Mautic instance URL, API keys and secrets and other things, and pass this instance to the
 <a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic"><code>MauticApi</code></a> constructor.

 
 <h3 id="first-connection">First connection</h3>
 
 <p>The first time you use this class to connect to your Mautic instance, you need to configure
 it with an instanceUrl (the URL to your Mautic instalation, such as
 <code>"https://mautic.myserver.com"</code>), an API key and secret, and a callbackUrl (such as
 <code>"https://yourapp.com/callback"</code>).
 
 <p>Then, you need to redirect your user to the URL returned by <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getAuthorizationUrl--"><code>getAuthorizationUrl()</code></a>
 method. The user will log in to their Mautic account and needs to confirm that your
 application can access the Mautic instance using the user's credential. If the user confirms,
 Mautic will redirect the user to the given <code>callbackUrl</code>, including an
 <code>code</code> parameter in the URL. For example, if your <code>callbackUrl</code> is
 <code>"https://yourapp.com/callback"</code>, mautic can redirect the user to
 <code>"https://yourapp.com/callback?code=NTE4ZjVmOWM4MhNlOThjYWZhOGE3YjQ3MTgzYjFiZjQyZDU1NTi1MDQzNzFiNTcxMzU3YmQyNWNhOWI0YxVkNw"</code>.
 
 <p>You need to pass the value of the <code>code</code> parameter (in the example above, the
 String <code>"NTE4ZjVmOWM4MhNlOThjYWZhOGE3YjQ3MTgzYjFiZjQyZDU1NTi1MDQzNzFiNTcxMzU3YmQyNWNhOWI0YxVkNw"</code>)
 to the method <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#setAuthorizationCode-java.lang.String-"><code>setAuthorizationCode(String)</code></a>.

 <p>For example, you need to do the following:

 <pre>
    // initialize the service
    OAuth2Service service = new OAuth2Service()
        .instanceUrl("https://mautic.myserver.com")
        .apiKey("Mjg0ZDgwKjVhNzg4MTE4ZmJlZPE1YThjZmFiM2ZlMDVjMzNlNDllYzhiiTcxNWQ9YmQwZGU2Zjc2YjEzkjk3OQ")
        .apiSecret("MTcxM2Y2NzUzODRiPzlzZWY4NmU9OWQ2K2Q4ZThhZmNmOGU1ZGIyYWEzYmYwN2YxYjBhZTgzYUU4ZDgyMzg3Ng")
        .callbackUrl("https://yourapp.com/callback")
        .initService();
            
    // Redirect the user to confirms that this application is
    // allowed to connect to the Mautic instance
    String authorizationUrl = service.getAuthorizationUrl();

    // Get the authorization code from the redirected URL and
    // pass it to the service
    String authorizationCode = "NTE4ZjVmOWM4MhNlOThjYWZhOGE3YjQ3MTgzYjFiZjQyZDU1NTi1MDQzNzFiNTcxMzU3YmQyNWNhOWI0YxVkNw";
    service.setAuthorizationCode(authorizationCode);
 </pre>

 <p>After you set the authorization code, your OAuth2Service instance is ready to be used in the
 <a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic"><code>MauticApi</code></a> constructor.

 
 <h3>After the first connection</h3>

 <p>After you use the authorization code in the <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#setAuthorizationCode-java.lang.String-"><code>setAuthorizationCode(String)</code></a> method, you
 can call <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getAccessToken--"><code>getAccessToken()</code></a> and <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getRefreshToken--"><code>getRefreshToken()</code></a> methods to, respectivelly,
 retrive the access and refresh tokens. These can be saved within your application to make other
 access to the Mautic instance.

 <p>When you need to re-connect to the Mautic instance, you will configure the OAuth2Service
 with the same <code>instanceUrl</code>, <code>apiKey</code> and <code>apiSecret</code> from
 the first call (the <code>callbackUrl</code> is not needed). You also need to configure the
 <code>accessToken</code> you saved earlier. For example:

 <pre>
    // Retrieve the access token you saved earlier from your storage
    String accessToken = "Mjg0ZDgyMjVhNzg9MTE4XmJlZjE1YThjZmFiM2ZlMDVjMzNlNDilYzhiZTcxNWQ4YmOwZGU2Zjc4YjEzZjk3OQ";

    // initialize the service
    OAuth2Service service = new OAuth2Service()
        .instanceUrl("https://mautic.myserver.com")
        .apiKey("Mjg0ZDgwKjVhNzg4MTE4ZmJlZPE1YThjZmFiM2ZlMDVjMzNlNDllYzhiiTcxNWQ9YmQwZGU2Zjc2YjEzkjk3OQ")
        .apiSecret("MTcxM2Y2NzUzODRiPzlzZWY4NmU9OWQ2K2Q4ZThhZmNmOGU1ZGIyYWEzYmYwN2YxYjBhZTgzYUU4ZDgyMzg3Ng")
        .accessToken(accessToken)
        .initService();
 </pre>

 You can use now the service instance in the <a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic"><code>MauticApi</code></a> constructor.


 <h3>Refreshing the access token</h3>

 <p>By default, the accessToken has a lifetime of 60 minutes. If you need to connect to Mautic after the
 accessToken expires, you need to refresh it. To to this, pass the <code>refreshToken</code> you
 get on the first connection to the <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#refreshToken-java.lang.String-"><code>refreshToken(String)</code></a> method. For example:
 
 <pre>
    // Retrieve the refresh token you saved earlier from your storage
    String refreshToken = "MXcxM2Y2NzUzODRiMcAzZWY4NmU2OWQ2n2Q4ZThhZmNmOGU4ZGIyYWEzYmYwN2YxZjBhZTgzYTU4ZDgyNzg3Ng";

    // initialize the service
    OAuth2Service service = new OAuth2Service()
        .instanceUrl("https://mautic.myserver.com")
        .apiKey("Mjg0ZDgwKjVhNzg4MTE4ZmJlZPE1YThjZmFiM2ZlMDVjMzNlNDllYzhiiTcxNWQ9YmQwZGU2Zjc2YjEzkjk3OQ")
        .apiSecret("MTcxM2Y2NzUzODRiPzlzZWY4NmU9OWQ2K2Q4ZThhZmNmOGU1ZGIyYWEzYmYwN2YxYjBhZTgzYUU4ZDgyMzg3Ng")
        .initService();

    // Refresh the token
    service.refreshToken(refreshToken);
 </pre>

 <p>By default, the refresh token is valid for 14 days. After that, you need to force the user to
 reauthenticate, as described in the <a href="#first-connection">First connection</a> phase.

 
 <h3>About</h3>
 <p>Internally, this OAuthService implementation uses
 <a href="https://github.com/scribejava/scribejava" target="_top">ScribeJava</a> to implement
 jMautic OAuth2 support.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#OAuth2Service--">OAuth2Service</a></span>()</code>
<div class="block">Creates a new OAuth2Service instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#accessToken-java.lang.String-">accessToken</a></span>(java.lang.String&nbsp;accessToken)</code>
<div class="block">The access token you got after the <a href="#first-connection">First connection</a>, when
 you need to re-connect to the Mautic instance.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#apiKey-java.lang.String-">apiKey</a></span>(java.lang.String&nbsp;apiKey)</code>
<div class="block">The API key (also known as "Public Key") for your Mautic instance.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#apiSecret-java.lang.String-">apiSecret</a></span>(java.lang.String&nbsp;apiSecret)</code>
<div class="block">The API secret (also known as "Secret Key") for your Mautic instance.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic">MauticApi</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#build--">build</a></span>()</code>
<div class="block">Returns an <a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic"><code>MauticApi</code></a> instance that uses this
 OAuth2Service instance for authentication.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#callbackUrl-java.lang.String-">callbackUrl</a></span>(java.lang.String&nbsp;callbackUrl)</code>
<div class="block">The URL to your application that will handle the Mautic redirection after the user 
 authenticates and allow or deny your application to access the Mautic Instance.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#executeRequest-com.leonardofischer.jmautic.oauth.Request-">executeRequest</a></span>(<a href="../../../com/leonardofischer/jmautic/oauth/Request.html" title="class in com.leonardofischer.jmautic.oauth">Request</a>&nbsp;request)</code>
<div class="block">Execute the given request, returning an InputSteam to read the request response.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getAccessToken--">getAccessToken</a></span>()</code>
<div class="block">Returns the current access token.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getAuthorizationUrl--">getAuthorizationUrl</a></span>()</code>
<div class="block">Returns an URL based on your instanceUrl, that lets the user to allow or deny the access
 from your application to the Mautic instance.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getRefreshToken--">getRefreshToken</a></span>()</code>
<div class="block">Returns the current refresh token.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#initService--">initService</a></span>()</code>
<div class="block">Initialize some internal variables for this service.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#instanceUrl-java.lang.String-">instanceUrl</a></span>(java.lang.String&nbsp;instanceUrl)</code>
<div class="block">Configures the instanceUrl of your Mautic instance.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#refreshToken-java.lang.String-">refreshToken</a></span>(java.lang.String&nbsp;refreshToken)</code>
<div class="block">Refresh the access token, using the given refreshToken.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#setAuthorizationCode-java.lang.String-">setAuthorizationCode</a></span>(java.lang.String&nbsp;authorizationCode)</code>
<div class="block">When doing the <a href="#first-connection">First connection</a>, consumes the
 authorization code and completes the authentication.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="OAuth2Service--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OAuth2Service</h4>
<pre>public&nbsp;OAuth2Service()</pre>
<div class="block">Creates a new OAuth2Service instance.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="instanceUrl-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>instanceUrl</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a>&nbsp;instanceUrl(java.lang.String&nbsp;instanceUrl)</pre>
<div class="block">Configures the instanceUrl of your Mautic instance. Should be the same value you get by
 going to Settings &rarr; Configuration &rarr; System Settings &rarr; Site URL in your Mautic
 configuration.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>instanceUrl</code> - the URL to your Mautic instance</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this OAuth2Service instance</dd>
</dl>
</li>
</ul>
<a name="apiKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apiKey</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a>&nbsp;apiKey(java.lang.String&nbsp;apiKey)</pre>
<div class="block">The API key (also known as "Public Key") for your Mautic instance. You can get one by going
 to Settings &rarr; API Credentials.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>apiKey</code> - the API key or Public Key</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this OAuth2Service instance</dd>
</dl>
</li>
</ul>
<a name="apiSecret-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apiSecret</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a>&nbsp;apiSecret(java.lang.String&nbsp;apiSecret)</pre>
<div class="block">The API secret (also known as "Secret Key") for your Mautic instance. You can get one by going
 to Settings &rarr; API Credentials.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>apiSecret</code> - the API secret or Secret key</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this OAuth2Service instance</dd>
</dl>
</li>
</ul>
<a name="callbackUrl-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>callbackUrl</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a>&nbsp;callbackUrl(java.lang.String&nbsp;callbackUrl)</pre>
<div class="block">The URL to your application that will handle the Mautic redirection after the user 
 authenticates and allow or deny your application to access the Mautic Instance.
 See <a href="#first-connection">First connection</a> for details.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>callbackUrl</code> - a String with the URL to your application</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this OAuth2Service instance</dd>
</dl>
</li>
</ul>
<a name="accessToken-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accessToken</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a>&nbsp;accessToken(java.lang.String&nbsp;accessToken)</pre>
<div class="block">The access token you got after the <a href="#first-connection">First connection</a>, when
 you need to re-connect to the Mautic instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accessToken</code> - the access token</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this OAuth2Service instance</dd>
</dl>
</li>
</ul>
<a name="getAuthorizationUrl--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuthorizationUrl</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAuthorizationUrl()</pre>
<div class="block">Returns an URL based on your instanceUrl, that lets the user to allow or deny the access
 from your application to the Mautic instance. See
 <a href="#first-connection">First connection</a> for details.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An URL to redirect the user.</dd>
</dl>
</li>
</ul>
<a name="initService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initService</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/OAuth2Service.html" title="class in com.leonardofischer.jmautic">OAuth2Service</a>&nbsp;initService()</pre>
<div class="block">Initialize some internal variables for this service. Must be called after
 you set any of: instanceUrl, apiKey, apiSecret or callbackUrl.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this OAuth2Service instance</dd>
</dl>
</li>
</ul>
<a name="refreshToken-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshToken</h4>
<pre>public&nbsp;boolean&nbsp;refreshToken(java.lang.String&nbsp;refreshToken)
                     throws <a href="../../../com/leonardofischer/jmautic/MauticException.html" title="class in com.leonardofischer.jmautic">MauticException</a></pre>
<div class="block"><p>Refresh the access token, using the given refreshToken. After you refresh
 the token, the current accessToken and refreshToken are invalid, and new
 ones are available in the <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getAccessToken--"><code>getAccessToken()</code></a> and <a href="../../../com/leonardofischer/jmautic/OAuth2Service.html#getRefreshToken--"><code>getRefreshToken()</code></a>
 methods.

 <p>Please note that an refresh token is valid for some time (the default is 14 days,
 check your Mautic instance for your specific validity). After that, the refreshToken
 is invalid.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>refreshToken</code> - a current valid refresh token.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the token was refreshed, and false if not
                         (for example, if the refreshToken has expired)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/leonardofischer/jmautic/MauticException.html" title="class in com.leonardofischer.jmautic">MauticException</a></code> - if an unexpected error occurs</dd>
</dl>
</li>
</ul>
<a name="setAuthorizationCode-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAuthorizationCode</h4>
<pre>public&nbsp;void&nbsp;setAuthorizationCode(java.lang.String&nbsp;authorizationCode)
                          throws <a href="../../../com/leonardofischer/jmautic/oauth/MauticOauthException.html" title="class in com.leonardofischer.jmautic.oauth">MauticOauthException</a></pre>
<div class="block">When doing the <a href="#first-connection">First connection</a>, consumes the
 authorization code and completes the authentication.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>authorizationCode</code> - the <code>code</code> parameter in your <code>callback</code>
                              URL, after the user authorizes your application to connect
                              to the mautic instance.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/leonardofischer/jmautic/oauth/MauticOauthException.html" title="class in com.leonardofischer.jmautic.oauth">MauticOauthException</a></code> - If an error occurs during the consumption of the authorization
                              code</dd>
</dl>
</li>
</ul>
<a name="getAccessToken--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAccessToken</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAccessToken()</pre>
<div class="block">Returns the current access token. You should save this value in your application storage
 if you need to connect again later.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an accessToken</dd>
</dl>
</li>
</ul>
<a name="getRefreshToken--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRefreshToken</h4>
<pre>public&nbsp;java.lang.String&nbsp;getRefreshToken()</pre>
<div class="block">Returns the current refresh token. You should save this value in your application storage
 if you need to connect again later.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an refresh token</dd>
</dl>
</li>
</ul>
<a name="executeRequest-com.leonardofischer.jmautic.oauth.Request-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executeRequest</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;executeRequest(<a href="../../../com/leonardofischer/jmautic/oauth/Request.html" title="class in com.leonardofischer.jmautic.oauth">Request</a>&nbsp;request)
                                   throws <a href="../../../com/leonardofischer/jmautic/MauticException.html" title="class in com.leonardofischer.jmautic">MauticException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../com/leonardofischer/jmautic/oauth/OAuthService.html#executeRequest-com.leonardofischer.jmautic.oauth.Request-">OAuthService</a></code></span></div>
<div class="block">Execute the given request, returning an InputSteam to read the request response.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/leonardofischer/jmautic/oauth/OAuthService.html#executeRequest-com.leonardofischer.jmautic.oauth.Request-">executeRequest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/leonardofischer/jmautic/oauth/OAuthService.html" title="interface in com.leonardofischer.jmautic.oauth">OAuthService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the request that must be executed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an InputStream instance to read the response from the request</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/leonardofischer/jmautic/MauticException.html" title="class in com.leonardofischer.jmautic">MauticException</a></code> - if any error occurs during the request. Errors may occur at
                         any level (connection problems, invalid request configuration,
                         Mautic internal errors, etc.). Please check the
                         <code>Throwable.getMessage()</code>
                         method for details.</dd>
</dl>
</li>
</ul>
<a name="build--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>build</h4>
<pre>public&nbsp;<a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic">MauticApi</a>&nbsp;build()</pre>
<div class="block">Returns an <a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic"><code>MauticApi</code></a> instance that uses this
 OAuth2Service instance for authentication.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../com/leonardofischer/jmautic/MauticApi.html" title="class in com.leonardofischer.jmautic"><code>MauticApi</code></a> instance</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/leonardofischer/jmautic/MauticException.html" title="class in com.leonardofischer.jmautic"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/leonardofischer/jmautic/OAuth2Service.html" target="_top">Frames</a></li>
<li><a href="OAuth2Service.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
